"use strict";(self.webpackChunk_18comic_react=self.webpackChunk_18comic_react||[]).push([[98],{98:(e,t,a)=>{a.r(t),a.d(t,{default:()=>y});var s=a(9379),r=a(5043),l=a(6580),o=a(3944),i=a(6148),n=a(4117),c=a(3438),d=a(2028),g=a(9484),m=a(5411),u=a(2072),x=a(597),h=a(5208),b=a(2012),v=a(9011),p=a(579);const y=()=>{var e,t,a,y;const{config:j}=(0,o.H)(),{setting:f}=j,{t:N}=(0,n.Bd)(),k=(0,i.j)(),w=sessionStorage.getItem("lib"),[A,_]=(0,r.useState)({query:"",tab:Number(w)||1,page:1}),[L,S]=(0,r.useState)({language:"",source:""}),{creatorAuthorList:C,creatorWorkList:I,isLoading:M,isLoadMore:q}=(0,i.G)((e=>e.creator)),z=1===A.tab?C:I,F=null!==(e=z.list)&&void 0!==e&&e.length?Math.ceil(z.total/30):0,E=A.page<=F&&F>1,B=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A.page,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A.query,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:A.tab;t&&(sessionStorage.setItem("catLoadMore","1"),_((0,s.A)((0,s.A)({},A),{},{query:r,tab:l,page:1})),k((0,b.w)("creatorAuthorList"))),k((0,b.zm)({isLoading:!0,isLoadMore:e,isRefreshing:t})),setTimeout((()=>{k(1===l?(0,h.vh)({page:a,search_query:r}):(0,h.xN)({page:a,search_value:r,lang:L.language,source:L.source})),sessionStorage.setItem("libLoadMore",String(a))}),500)};(0,r.useEffect)((()=>{B()}),[L]);return(0,p.jsxs)(p.Fragment,{children:[M&&(0,p.jsx)(m.A,{}),(0,p.jsxs)("div",{className:"sticky top-0 h-20 bg-bbk text-white flex items-end p-2 py-3 z-50",children:[(0,p.jsx)(v.ee,{back:sessionStorage.getItem("fromPage")||"/"}),(0,p.jsx)("p",{className:"ml-4 text-2xl text-og",children:N("library.forbidden_comic_library")})]}),(0,p.jsxs)("div",{className:"relative w-full flex justify-cneter my-4",children:[(0,p.jsx)("input",{type:"text",className:"relative m-auto w-11/12 h-12 border-none outline-none rounded-full text-gy px-9 dark:bg-nbk",placeholder:N("search.search_keyword"),value:A.query,onChange:e=>_((t=>(0,s.A)((0,s.A)({},t),{},{query:e.target.value}))),onKeyDown:e=>{"Enter"===e.key&&B(!1,!1,1,e.target.value)}}),(0,p.jsx)(g.A,{className:"absolute left-7 top-1/2 transform -translate-y-1/2 text-[#aaa] text-2xl stroke-gray-400"}),A.query&&(0,p.jsx)(c.A,{className:"absolute right-8 top-1/2 transform -translate-y-1/2 text-[#aaa] text-xl stroke-gray-400",onClick:()=>B(!1,!1,1,"")})]}),(0,p.jsx)("div",{className:"w-full flex justify-around text-center text-lg text-gy",children:["\u5275\u4f5c\u8005","\u4f5c\u54c1"].map(((e,t)=>(0,p.jsx)("p",{className:"w-1/2 py-4 ".concat(A.tab===t+1?"bg-white text-og font-bold border-b-4 border-og dark:bg-nbk":""),onClick:()=>{return B(!1,!1,1,"",e=t+1),sessionStorage.setItem("lib",String(e)),void _((0,s.A)((0,s.A)({},A),{},{tab:e}));var e},children:e},e)))}),1===A.tab?(0,p.jsx)(p.Fragment,{children:(null===(t=C.list)||void 0===t?void 0:t.length)>0&&C.list.map(((e,t)=>(0,p.jsx)(l.N_,{to:"/library/list?creatorId=".concat(e.id),children:(0,p.jsxs)("div",{className:"relative bg-cover bg-center overflow-hidden px-4 py-2 my-2",style:{backgroundImage:"url(".concat((null===f||void 0===f?void 0:f.img_host)+e.background_image,")")},children:[(0,p.jsx)("div",{className:"absolute inset-0 bg-gray-900 bg-opacity-60"}),(0,p.jsxs)("div",{className:"flex items-center relative z-10",children:[(0,p.jsx)("div",{className:"w-2/6",children:(0,p.jsx)("img",{src:(null===f||void 0===f?void 0:f.img_host)+e.author_avatar,alt:e.id,loading:"lazy",onLoad:e=>{e.target.style.opacity="1"},onError:e=>{e.target.src="/images/title-circle.webp"},className:"w-32 object-cover rounded-xl",style:{opacity:"0",transition:"opacity 0.5s ease-in-out"}})}),(0,p.jsxs)("div",{className:"w-4/6",children:[(0,p.jsx)("p",{className:"text-og text-2xl font-bold p-3",children:e.author_name}),(0,p.jsxs)("span",{className:"text-tgy p-3",children:[e.update_date,N("library.update")]})]})]})]})},t)))}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(u.A,{t:N,filtersList:I.filters,filter:L,setFilter:S}),(0,p.jsx)(x.A,{list:I.list,setting:f})]}),(0,p.jsxs)("div",{className:"flex flex-col justify-center items-center my-10 pb-40",children:[(null===(a=z.list)||void 0===a?void 0:a.length)>0&&M&&(0,p.jsx)("img",{src:"/images/loading.gif",alt:"loading",width:"80px"}),(null===(y=z.list)||void 0===y?void 0:y.length)>0&&(E?(0,p.jsx)("button",{onClick:()=>(()=>{if(!E)return;const e=sessionStorage.getItem("libLoadMore"),t=Number(e)+1;_((0,s.A)((0,s.A)({},A),{},{page:t})),B(!0,!1,t)})(),className:"w-4/12 rounded-sm text-white p-2 bg-og shadow-lg shadow-stone-700/50",children:N("comic.load_more")}):(0,p.jsx)("p",{className:"text-center mt-10",children:N("comic.no_more")}))]}),(0,p.jsx)(d.A,{})]})}},3438:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(9662),r=a(579);const l=(0,s.A)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close")},9484:(e,t,a)=>{a.d(t,{A:()=>l});var s=a(9662),r=a(579);const l=(0,s.A)((0,r.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search")}}]);
//# sourceMappingURL=98.6bb517b0.chunk.js.map