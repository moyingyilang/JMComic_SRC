"use strict";(self.webpackChunk_18comic_react=self.webpackChunk_18comic_react||[]).push([[884],{1299:(e,s,t)=>{t.d(s,{A:()=>m,q:()=>c});var r=t(9379),o=t(5043),a=t(4836),i=t(5691),l=t(3773),d=t(579);function n(e){return(0,d.jsx)(a.A,(0,r.A)((0,r.A)({},e),{},{direction:"down"}))}const c=()=>{const[e,s]=(0,o.useState)([]);return{snackbars:e,setSnackbars:s,showSnackbar:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",r=arguments.length>2?arguments[2]:void 0;const o={key:Date.now()+Math.random(),msg:e,type:t,marginTop:r};s((e=>{const s=[...e,o];return s.length>3&&s.shift(),s}))}}};function m(e){let{snackbars:s,setSnackbars:t}=e;const o=e=>{switch(e){case"success":return{backgroundColor:"#1f7a1f",color:"#fff"};case"error":return{backgroundColor:"#c4201d",color:"#fff"};case"warning":return{backgroundColor:"#fffde8",color:"#000"};default:return{backgroundColor:"#868686",color:"#fff"}}};return(0,d.jsx)(d.Fragment,{children:[...s].reverse().map(((e,s)=>{const a=e.marginTop?"calc(".concat(e.marginTop," + ").concat(70*s,"px)"):"".concat(70*s,"px");return(0,d.jsx)(i.A,{open:!0,autoHideDuration:5e3,onClose:(s,r)=>{var o;"clickaway"!==r&&(o=e.key,t((e=>e.filter((e=>e.key!==o)))))},TransitionComponent:n,anchorOrigin:{vertical:"top",horizontal:"center"},sx:{top:a,"&.MuiSnackbar-root":{maxWidth:"40%",margin:"0 auto"}},children:(0,d.jsx)(l.A,{elevation:1,message:e.msg,sx:(0,r.A)((0,r.A)({},o(e.type)),{},{borderRadius:"4px",boxShadow:"0 2px 6px rgba(0,0,0,0.2)"})})},e.key)}))})}},1060:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(9379),o=t(6580),a=t(579);const i=e=>{const{t:s,queryId:t,seriesGroups:i,setSeriesGroups:l,msgOpen:d,handlerReadStorage:n,readHistory:c,setDialogOpen:m}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"p-3 text-gy",children:i.menus.length>0?i.menus.map(((e,h)=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"flex border-[1px] border-solid border-[#ccc] rounded-md p-3 mb-4 ".concat(i.episode===h?"bg-og text-white":null!==d&&void 0!==d&&d.detailDownload?"bg-defaultBg":""),onClick:()=>{l((e=>(0,r.A)((0,r.A)({},e),{},{episode:h})))},children:[s("detail.episode_prefix"),e[0].sort,s("detail.episode_suffix"),"~",s("detail.episode_prefix"),10*Math.ceil(e[0].sort/10),s("detail.episode_suffix")]}),i.episode===h&&(0,a.jsx)("div",{className:"grid grid-cols-2 gap-2 my-2 mb-10",children:e.map(((e,x)=>null!==d&&void 0!==d&&d.detailDownload?(0,a.jsx)(o.N_,{to:"/comic/detail/download?id=".concat(e.id),onClick:()=>{l((s=>(0,r.A)((0,r.A)({},s),{},{subEpisode:e.sort,currentChapterId:e.id})))},children:(0,a.jsxs)("p",{className:"flex border-[1px] border-solid border-[#bbb] rounded-md p-3 ".concat(i.subEpisode===e.sort?"bg-og text-white":""),children:[s("detail.episode_prefix"),e.sort,s("detail.episode_suffix"),"\xa0",e.name]})},x):(0,a.jsx)(o.N_,{to:"/comic/detail/read?id=".concat(t,"&readId=").concat(e.id,"&episode=").concat(h,"&subEpisode=").concat(e.sort),onClick:()=>{n(String(e.id)),l((s=>(0,r.A)((0,r.A)({},s),{},{subEpisode:e.sort,currentChapterId:e.id}))),m((e=>(0,r.A)((0,r.A)({},e),{},{series:!1})))},children:(0,a.jsxs)("p",{className:"flex border-[1px] border-solid border-[#bbb] rounded-md p-3 \n                            ".concat(i.subEpisode===e.sort?"bg-og text-white":c.includes(e.id)?"bg-white text-og":"","\n                                "),children:[s("detail.episode_prefix"),e.sort,s("detail.episode_suffix"),"\xa0",e.name]})},x)))})]},h))):(0,a.jsx)("p",{className:"text-center my-8",children:s("detail.no_more_chapters")})})})}},3492:(e,s,t)=>{t.d(s,{A:()=>f});var r=t(9379),o=t(5043),a=t(6580),i=t(6148),l=t(5244),d=t(2782),n=t(3752),c=t(9506),m=t(1100),h=t(7680),x=t(2432),u=t(3344),p=t(7947),g=t(5412),b=t(579);const f=e=>{const{t:s,listName:t,logined:f,list:j,title:v,link:A,smImgSize:k,setting:y,cols:w,comicTags:N,comicMark:_,comicCheck:C,cardPadding:S,editFolder:T,setEditFolder:F,showSnackbar:I,setDialogOpen:M,dialogOpen:O,isWeekly:E}=e,L=(0,i.j)(),{favoriteList:z}=(0,i.G)((e=>e.member)),q=(0,o.useRef)(null),D=(0,o.useRef)(!1),R=JSON.parse(localStorage.getItem("likedItems")||"[]"),[P,Q]=(0,o.useState)((()=>{const e=localStorage.getItem("likedItems");return{like:e?JSON.parse(e):[],mark:[]}})),W=e=>{window.location.pathname.includes("member")&&(D.current=!1,q.current=setTimeout((()=>{F((0,r.A)((0,r.A)({},T),{},{edit:!0,type:"del_comic",alert:!0,message:s("snack.confirm_delete"),aid:e}))}),800))},G=()=>{q.current&&clearTimeout(q.current)},J=()=>{D.current=!0,clearTimeout(q.current)},Y=async(e,t)=>{if("like"===e){if(R.includes(t))return void I(s("snack.already_rated"),"success");localStorage.setItem("likedItems",JSON.stringify([...R,t]));const e=await L((0,m.c1)({id:t})).unwrap(),{code:r,msg:o,status:a}=e.data;200===r&&I(o,"success"!==a?"error":"success")}if("mark"===e)if(f){U(),((e,s)=>{Q((t=>{const o=t[e]||[],a=o.includes(s)?o.filter((e=>e!==s)):[...o,s];return(0,r.A)((0,r.A)({},t),{},{[e]:a})}))})("mark",t);const e=await L((0,m.df)(t)).unwrap(),{code:s,data:o}=e,a="ok"!==o.status?"error":"success";if("ok"===o.status)switch(o.type){case"add":case"edit":case"move":F((e=>(0,r.A)((0,r.A)({},e),{},{aid:t,alert:!1}))),M((0,r.A)((0,r.A)({},O),{},{folder:!0}));break;case"remove":F((e=>(0,r.A)((0,r.A)({},e),p.x)))}I(o.msg,a)}else I(s("login.please_login"),"error"),M((0,r.A)((0,r.A)({},O),{},{login:!0}))},U=()=>{L((0,h.a9)("favoriteList"));const{folder_id:e,o:s}=T;L((0,m.an)({page:1,folder_id:e,o:s}))},B=async e=>{"del"===e&&M((0,r.A)((0,r.A)({},O),{},{alert:!0}));const{folder_id:t,folder_name:o,aid:a}=T;if(""!==o){const s=await L((0,m.Je)({type:e,folder_id:t,folder_name:o,aid:a})).unwrap(),{status:r,msg:i}=s.data;r&&i&&I(i,"ok"!==r?"error":"success")}else I(s("comic.added_to_favorites_success"),"success");F((e=>(0,r.A)((0,r.A)({},e),p.x)))};return(0,b.jsxs)(b.Fragment,{children:[Array.isArray(j)&&j.length>0&&(null===j||void 0===j?void 0:j.reduce(((e,s,t)=>(t%(w||3)===0&&e.push([]),e[e.length-1].push(s),e)),[]).map(((e,t)=>(0,b.jsx)("div",{className:"grid grid-cols-3 bg-white gap-2 my-3 p-2 relative dark:bg-nbk dark:text-tgy",style:{paddingTop:S||""},children:e.map(((e,o)=>{var i,m;return(0,b.jsxs)("div",{children:["new"===v&&0===t&&(0,b.jsx)("div",{className:"left-1 top-1 w-full h-6 rounded-sm mb-3",children:0===o?s("comic.latest_uploads"):""}),(0,b.jsxs)("div",{className:"relative mt-3",onMouseDown:()=>W(e.id),onMouseUp:G,onMouseLeave:G,onTouchStart:()=>W(e.id),onTouchEnd:G,onTouchMove:J,children:[(0,b.jsx)(a.N_,{to:A?"/comic/detail?id=".concat(e.id):"#",children:(0,b.jsx)("img",{src:(null===y||void 0===y?void 0:y.img_host)&&y.img_host+"/media/albums/"+e.id+"_3x4.jpg?v="+e.update_at,alt:e.id,loading:"lazy",onLoad:e=>{},onError:e=>{e.target.src="/images/cover_default.jpg"},className:"animation-click-item object-cover rounded-md\n                          ".concat(k?"h-[150px] w-[130px]":"w-[128px] h-[171px]"," \n                         ").concat(T.edit&&null!==(i=T.aid)&&void 0!==i&&i.split(",").includes(e.id.toString())?"opacity-75":"","\n                         "),style:{}})}),T.edit&&C&&(0,b.jsx)("div",{className:"absolute left-2 top-2 rounded text-white px-[0.2rem]",onClick:()=>{var s;const t=(null===(s=T.aid)||void 0===s?void 0:s.split(","))||[],o=t.includes(e.id)?t.filter((s=>s!==e.id)):[...t,e.id];F((e=>(0,r.A)((0,r.A)({},e),{},{aid:o.join(",").replace(/^,/,"")})))},children:(0,b.jsx)("p",{className:"border-2 border-solid border-og w-6 h-6 flex",children:(null===(m=T.aid)||void 0===m?void 0:m.split(",").includes(e.id))&&(0,b.jsx)(c.A,{sx:{fontSize:14,color:"#ff6f00",stroke:"#ff6f00",strokeWidth:2}},e.id)})}),E&&(0,g._2)(Number(e.update_at))<=3&&(0,b.jsx)("span",{className:"absolute left-2 top-2 rounded bg-red-600 text-white px-[0.1rem]",children:s("library.update")}),N&&(0,b.jsx)("div",{className:"absolute right-2 top-2 rounded bg-og text-white px-[0.2rem]",children:e.category.title}),_&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"bg-[rgb(117,117,117,0.6)] absolute left-2 bottom-3 rounded p-[0.1rem]",onClick:()=>Y("like",e.id),children:(0,b.jsx)(l.A,{className:"".concat(e.liked||R.includes(e.id)?"text-red-600":"text-og")})}),(0,b.jsx)("div",{className:"bg-[rgb(117,117,117,0.6)] absolute right-2 bottom-3 rounded p-[0.1rem]",onClick:()=>Y("mark",e.id),children:e.is_favorite||P.mark.includes(e.id)?(0,b.jsx)(n.A,{className:"text-og"}):(0,b.jsx)(d.A,{className:"text-2xl text-white"})})]})]}),(0,b.jsxs)(a.N_,{to:A?"/comic/detail?id=".concat(e.id):"#",children:[(0,b.jsx)("p",{className:"truncate py-2",children:e.name}),(0,b.jsx)("p",{className:"truncate text-gy text-t08",children:e.author})]})]},e.id)}))},t)))),"mainList"!==t&&O.folder&&(0,b.jsx)(u.A,{folderList:z.folder_list,dialogOpen:O,setDialogOpen:M,editFolder:T,setEditFolder:F,handleEditFolder:B,tagsList:[]}),T.alert&&(0,b.jsx)(x.Fc,{setEdit:F,edit:T,handleEdit:B,handleAction:Y,showSnackbar:I})]})}},2028:(e,s,t)=>{t.d(s,{A:()=>i});var r=t(5043),o=t(2101),a=t(579);const i=()=>{const[e,s]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=()=>{window.scrollY>500?s(!0):s(!1)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)}),[]);return(0,a.jsx)(a.Fragment,{children:e&&(0,a.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"w-14 h-14 rounded-full fixed bottom-[10rem] right-3 bg-og text-white z-50",children:(0,a.jsx)(o.A,{})})})}},3344:(e,s,t)=>{t.d(s,{A:()=>A});var r=t(9379),o=t(5043),a=t(3438),i=t(7392),l=t(1906),d=t(35),n=t(4219),c=t(5316),m=t(9347),h=t(4836),x=t(6990),u=t(5954),p=t(6258),g=t(378),b=t(9506),f=t(4117),j=t(579);const v=o.forwardRef((function(e,s){return(0,j.jsx)(h.A,(0,r.A)({direction:"up",ref:s},e))})),A=e=>{const{dialogOpen:s,setDialogOpen:t,editFolder:h,setEditFolder:A,handleEditFolder:k,folderList:y,tagsList:w}=e,[N,_]=(0,o.useState)(null),C=Boolean(N),{t:S}=(0,f.Bd)(),T=(null===w||void 0===w?void 0:w.length)>0&&h.tags_select===w.toString(),F=(e,o)=>{"backdropClick"!==o&&t((0,r.A)((0,r.A)({},s),{},{folder:!1}))};return(0,j.jsx)(j.Fragment,{children:s.folder&&(0,j.jsxs)(d.A,{onClose:F,"aria-labelledby":"customized-dialog-title",open:s.folder,TransitionComponent:v,className:"text-white",slotProps:{backdrop:{sx:{backgroundColor:"rgba(0, 0, 0, 0.3)"}}},sx:()=>({"& .MuiPaper-root":{paddingY:"1rem",width:"90%"}}),children:[(0,j.jsx)(i.A,{"aria-label":"close",onClick:F,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[700],stroke:e.palette.grey[700],strokeWidth:2}),children:(0,j.jsx)(a.A,{})}),"add"===h.type&&(0,j.jsx)(n.A,{className:"text-center",id:"customized-dialog-title",children:S("member.add_folder")}),"edit"===h.type&&(0,j.jsx)(n.A,{className:"text-center",id:"customized-dialog-title",children:S("member.rename_folder")}),"move"===h.type&&(0,j.jsx)(n.A,{id:"customized-dialog-title",children:S("member.Select_favorite_folder")}),(0,j.jsxs)(c.A,{className:"",children:[("add"===h.type||"edit"===h.type)&&(0,j.jsx)("input",{type:"text",placeholder:S("member.enter_folder_name"),className:"w-11/12 h-10 p-4 border border-solid border-gy",onChange:e=>A((0,r.A)((0,r.A)({},h),{},{folder_name:e.target.value}))}),"move"===h.type&&(0,j.jsxs)("div",{children:[(0,j.jsxs)(l.A,{id:"fade-button","aria-controls":C?"fade-menu":void 0,"aria-haspopup":"true","aria-expanded":C?"true":void 0,onClick:e=>_(e.currentTarget),className:"flex justify-between p-0 w-8/12 text-[#aaa] text-lg",children:[(0,j.jsx)("span",{className:"pr-10",children:h.folder_name||S("member.select_folder")}),(0,j.jsx)(u.A,{sx:{color:"#ff6f00",fontSize:24}})]}),(0,j.jsx)(g.A,{id:"fade-menu",MenuListProps:{"aria-labelledby":"fade-button"},anchorEl:N,open:C,onClose:()=>_(null),TransitionComponent:p.A,sx:e=>({"& .MuiPaper-root":{marginTop:e.spacing(0),marginLeft:e.spacing(-2),width:"50%",color:"#757575"}}),children:(null===y||void 0===y?void 0:y.length)>0&&y.map(((e,s)=>(0,j.jsx)(x.A,{onClick:()=>{_(null),A((0,r.A)((0,r.A)({},h),{},{folder_name:e.name,folder_id:e.FID}))},children:e.name},e.FID)))})]}),(null===w||void 0===w?void 0:w.length)>0&&(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)("hr",{className:"border-2 border-tgy my-4"}),(0,j.jsxs)("div",{className:"text-left",children:[(0,j.jsxs)("div",{className:"flex items-center",children:[(0,j.jsx)("p",{className:"border-2 border-solid border-og w-5 h-5 flex justify-center items-center overflow-hidden mr-2",onClick:()=>{const e=T?"":w.toString();A((s=>(0,r.A)((0,r.A)({},s),{},{tags_select:e})))},children:T&&(0,j.jsx)(b.A,{sx:{fontSize:14,color:"#ff6f00",stroke:"#ff6f00",strokeWidth:2}})}),(0,j.jsx)("span",{children:"\u6536\u85cf\u5168\u90e8\u6a19\u7c64"})]}),(0,j.jsx)("div",{className:"flex flex-wrap items-center text-gy mt-4 dark:text-tgy",children:w.map((e=>{var s;return(0,j.jsx)("span",{className:"border-[1px] border-solid border-gy rounded-md p-1 m-1 dark:bg-nbk\n                         ".concat(null!==(s=h.tags_select)&&void 0!==s&&s.split(",").includes(e)?"bg-og text-white border-og":""),onClick:()=>{var s;const t=(null===(s=h.tags_select)||void 0===s?void 0:s.split(","))||[],o=t.includes(e)?t.filter((s=>s!==e)):[...t,e];A((e=>(0,r.A)((0,r.A)({},e),{},{tags_select:o.join(",").replace(/^,/,"")})))},children:"#"+e},e)}))})]})]})]}),(0,j.jsx)(m.A,{className:"flex justify-center",children:(0,j.jsx)(l.A,{className:"bg-og text-white rounded border-solid border-2 border-og w-8/12",onClick:e=>{F(),"add"===h.type&&k("add"),"edit"===h.type&&k("edit"),"move"===h.type&&k("move")},children:S("member.confirm")})})]})})}},6733:(e,s,t)=>{t.d(s,{A:()=>j});var r=t(9379),o=t(5043),a=t(3438),i=t(2101),l=t(8293),d=t(7392),n=t(1906),c=t(35),m=t(4219),h=t(5316),x=t(9347),u=t(4836),p=t(1060),g=t(3944),b=t(579);const f=o.forwardRef((function(e,s){return(0,b.jsx)(u.A,(0,r.A)({direction:"up",ref:s},e))})),j=e=>{const{t:s,logined:t,queryId:u,detailList:j,setSeriesGroups:v,seriesGroups:A,content:k,msgOpen:y,setMsgOpen:w,handleTracking:N,handleSetDontShow:_}=e,{config:C}=(0,g.H)(),{darkMode:S}=C,[T,F]=(0,o.useState)(null),I=(e,s)=>{"backdropClick"!==s&&w((0,r.A)((0,r.A)({},y),{},{search:!1,detail:!1,detailDownload:!1,member:!1,readTrack:!1}))};return(0,b.jsxs)(b.Fragment,{children:[y.search&&(0,b.jsxs)(c.A,{onClose:I,"aria-labelledby":"customized-dialog-title",open:y.search,TransitionComponent:f,className:"text-white",sx:()=>({"& .MuiPaper-root":{paddingY:"1rem",width:"90%",background:S?"#323232":"",color:S?"#d1d1d1":"#323232"}}),children:[(0,b.jsxs)(m.A,{className:"text-center",id:"customized-dialog-title",children:[k.title,(0,b.jsx)("hr",{className:"w-9/12 border-[#aaa] m-auto"})]}),(0,b.jsxs)(h.A,{className:"text-center py-0",children:[(0,b.jsx)("img",{src:k.image?k.image:"/images/help_cover.png",alt:"help_cover",className:"w-10/12 m-auto"}),k.text_sections.map(((e,s)=>(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-black mt-3",children:e.title}),(0,b.jsx)("span",{children:e.content}),(0,b.jsx)("span",{children:e.example})]},s)))]}),(0,b.jsx)(x.A,{className:"flex justify-center",children:(0,b.jsx)(n.A,{className:"bg-og text-white rounded border-solid border-2 border-og w-8/12",onClick:I,children:k.btn_text})})]}),y.detail&&(0,b.jsxs)(c.A,{onClose:I,"aria-labelledby":"customized-dialog-title",open:y.detail,TransitionComponent:f,sx:()=>({"& .MuiPaper-root":{paddingY:"1rem",width:"90%",background:S?"#323232":"",color:S?"#d1d1d1":"#323232"}}),children:[(0,b.jsxs)(m.A,{className:"text-center",id:"customized-dialog-title",children:[k.title,(0,b.jsx)("hr",{className:"w-9/12 border-[#aaa] m-auto"})]}),(0,b.jsxs)(h.A,{children:[(0,b.jsx)("img",{src:k.image,alt:"help_cover",className:"w-8/12 m-auto"}),(0,b.jsx)("div",{children:k.text_sections.map(((e,s)=>(0,b.jsxs)("div",{className:"mt-2",children:[(0,b.jsx)("p",{className:"font-black",children:e.title}),(0,b.jsx)("span",{children:e.content})]},s)))})]}),(0,b.jsx)(x.A,{className:"flex justify-center",children:(0,b.jsx)(n.A,{className:"bg-og text-white rounded border-solid border-2 border-og w-8/12 text-base",onClick:I,children:k.btn_text})})]}),y.detailDownload&&(0,b.jsxs)(c.A,{onClose:I,"aria-labelledby":"customized-dialog-title",open:y.detailDownload,TransitionComponent:f,sx:()=>({"& .MuiPaper-root":{width:"90%",height:"60%"},"& .MuiDialogContent-root":{padding:0}}),children:[(0,b.jsx)(m.A,{id:"customized-dialog-title",children:s("detail.select_episode_to_download")}),(0,b.jsx)(d.A,{"aria-label":"close",onClick:I,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[900]}),children:(0,b.jsx)(a.A,{})}),(0,b.jsx)(h.A,{children:(0,b.jsx)(p.A,{t:s,queryId:u,detailList:j,seriesGroups:A,setSeriesGroups:v,msgOpen:y})})]}),y.member&&(0,b.jsxs)(c.A,{onClose:I,"aria-labelledby":"customized-dialog-title",open:y.member,TransitionComponent:f,className:"text-white",sx:()=>({"& .MuiPaper-root":{paddingY:"1rem",width:"90%",margin:"1rem"}}),children:[(0,b.jsx)(m.A,{className:"text-center text-4xl text-og",id:"customized-dialog-title",children:k[0].title}),(0,b.jsx)(d.A,{"aria-label":"close",onClick:I,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[700],stroke:e.palette.grey[700],strokeWidth:2}),children:(0,b.jsx)(a.A,{})}),(0,b.jsx)(h.A,{sx:{paddingTop:0},children:(0,b.jsx)("div",{children:k[0].text_section.map(((e,t)=>(0,b.jsxs)("div",{className:"mt-3",children:[(0,b.jsxs)("div",{className:"bg-og border-1 border-solid border-og text-white text-xl flex justify-between rounded-t-lg p-4",onClick:()=>F(T===t?null:t),children:[(0,b.jsx)("p",{className:"flex",children:Array.isArray(e.FAQ)&&e.FAQ.map(((e,t)=>(0,b.jsxs)(o.Fragment,{children:[e,e.includes(s("common_q.jJar"))&&(0,b.jsx)("img",{src:k[0].list[0].img,alt:"jJar"}),e.includes(s("common_q.jCharge"))&&(0,b.jsx)("img",{src:k[0].list[1].img,alt:"jCharge"})]},t)))}),T===t?(0,b.jsx)(i.A,{}):(0,b.jsx)(l.A,{})]}),T===t?(0,b.jsx)("p",{className:"text-lg border border-solid border-gy border-t-og p-3",children:e.content.map((e=>(0,b.jsx)("span",{className:"block ".concat(1===t?"text-center":""),children:e},e)))}):null]},t)))})})]}),y.readTrack&&(0,b.jsxs)(c.A,{onClose:I,"aria-labelledby":"customized-dialog-title",open:y.readTrack,TransitionComponent:f,className:"text-white",sx:e=>({"& .MuiPaper-root":{paddingY:"1rem",width:"90%",background:S?"#323232":"",color:S?"#d1d1d1":e.palette.grey[500]}}),children:[(0,b.jsx)(m.A,{id:"customized-dialog-title",children:s("common_q.finalChapter")}),(0,b.jsx)(d.A,{"aria-label":"close",onClick:I,sx:e=>({position:"absolute",right:8,top:8,color:e.palette.grey[500]}),children:(0,b.jsx)(a.A,{})}),(0,b.jsx)(h.A,{dividers:!0,className:"py-10",children:s("common_q.stayUpdated")}),(0,b.jsxs)(x.A,{className:"flex justify-between items-center px-6",children:[(0,b.jsxs)("div",{className:"flex items-center",children:[(0,b.jsx)("input",{type:"checkbox",id:"dontShow",name:"dontShow",className:"mr-1",onChange:e=>_(e)}),(0,b.jsx)("label",{htmlFor:"dontShow",children:s("common_q.dontShow")})]}),(0,b.jsx)(n.A,{className:"bg-og text-white rounded border-solid border-2 border-og w-32",onClick:e=>{N(u),t&&I()},children:s("common_q.followSeries")})]})]})]})}},5884:(e,s,t)=>{t.r(s),t.d(s,{default:()=>I});var r=t(9379),o=t(5043),a=t(6580),i=t(3944),l=t(6148),d=t(319),n=t(5843),c=t(4117),m=t(1637),h=t(7621),x=t(6973),u=t(9484),p=t(3438),g=t(5954),b=t(5411),f=t(2028),j=t(3492),v=t(6733),A=t(7044),k=t(8038),y=t(606),w=t(7374),N=t(5412),_=t(5090),C=t(7947),S=t(1299),T=t(9011),F=t(579);const I=()=>{var e,s,t,I,M;const{config:O}=(0,i.H)(),{setting:E,logined:L}=O,z=(0,a.Zp)(),{t:q}=(0,c.Bd)(),{snackbars:D,setSnackbars:R,showSnackbar:P}=(0,S.q)(),Q=q("search.radio_option",{returnObjects:!0}),W=(0,o.useRef)(null),G=(0,_.h8)(),J=(0,_.Kb)(),Y=(0,l.j)(),{searchList:U,hotTagsList:B,randomRecommendList:H,isLoading:K,isRefreshing:Z}=(0,l.G)((e=>e.search)),[V,X]=(0,o.useState)({search:!1,folder:!1}),[$,ee]=(0,o.useState)({search:!1}),se=(0,a.zy)(),te=(0,T.bs)(),re=null!==(e=new URLSearchParams(se.search).get("filter"))&&void 0!==e?e:"",oe=sessionStorage.getItem("fromPage")||"/",ae=sessionStorage.getItem("searchQuery"),[ie,le]=(0,o.useState)((()=>{const e=localStorage.getItem("search");return e?JSON.parse(e):[]})),de=Math.floor(Math.random()*(null===H||void 0===H?void 0:H.length)),ne=H&&(null===(s=H[de])||void 0===s?void 0:s.id),[ce,me]=(0,o.useState)(1),{ref:he,inView:xe}=(0,n.Wx)(),ue=(null===(t=U.list)||void 0===t?void 0:t.length)>0?Math.ceil(U.total/80):0,pe=ce<=ue&&ue>1,ge={start:!1,query:"",selected:"\u6210\u4ebaA\u6f2b",sort:G[0]},[be,fe]=(0,o.useState)(ge),[je,ve]=(0,o.useState)(C.x),Ae=(0,o.useCallback)((function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:be.query,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:be.sort.key;Y((0,y.FP)({isLoading:!0,isLoadMore:e,isRefreshing:s})),e||me(1),setTimeout((async()=>{const e=await Y((0,w.BN)({search_query:o,o:a,page:t})).unwrap();e.redirect_aid&&z("/comic/detail?id=".concat(e.redirect_aid))}),r)}),[be]);(0,o.useEffect)((()=>{te(),0===(null===B||void 0===B?void 0:B.length)&&0===(null===H||void 0===H?void 0:H.length)&&(Y((0,w.QY)()),Y((0,w.P7)()))}),[B.length,H.length]),(0,o.useEffect)((()=>{re!==ae?re&&re!==be.query?ke(re):""===re&&fe((e=>(0,r.A)((0,r.A)({},e),ge))):fe((e=>(0,r.A)((0,r.A)({},e),{},{start:!0,query:ae})))}),[re]);const ke=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if("\u6210\u4ebaA\u6f2b"===be.selected)me(1),Ae(!1,!1,1,0,e,s),fe((s=>(0,r.A)((0,r.A)({},s),{},{start:!0,query:e}))),ye(e,"add"),z("/search?filter=".concat(encodeURIComponent(e)));else{const s="\u5c0f\u96fb\u5f71"===be.selected?"movie":"video";z("/movies?videoType=".concat(s,"&searchQuery=").concat(encodeURIComponent(e)))}};(0,o.useEffect)((()=>{ie.length>0&&localStorage.setItem("search",JSON.stringify(ie))}),[ie]);const ye=(e,s)=>{le((t=>{let r;return"add"===s?r=t.includes(e)?t:[...t,e]:"remove"===s?r=t.filter((s=>s!==e)):"allRemove"===s&&(r=[],localStorage.removeItem("search")),r}))},we=(0,o.useCallback)((()=>{if(pe&&xe&&pe){const e=ce+1;me(e),Ae(!0,!1,e,1e3)}}),[xe,pe]);(0,o.useEffect)((()=>{we()}),[we]);const Ne=()=>{Y((0,y.a)("searchList")),z("/search"),sessionStorage.removeItem("searchQuery"),fe((e=>(0,r.A)((0,r.A)({},e),ge)))};return(0,F.jsxs)("div",{className:"min-h-screen",children:[K&&be.start&&(0,F.jsx)(b.A,{}),(0,F.jsxs)("div",{className:"w-full bg-og text-white flex justify-between p-2",children:[(0,F.jsx)("div",{className:"flex items-center w-1/12",onClick:()=>{se.search&&null===ae?z(-2):ae?(Ne(),sessionStorage.removeItem("searchQuery")):z(oe)},children:(0,F.jsx)(h.A,{sx:{stroke:"white",strokeWidth:2}})}),(0,F.jsxs)("div",{className:"flex flex-wrap items-start w-11/12 m-2 flex-col",children:[(0,F.jsxs)("div",{className:"relative w-full",children:[(0,F.jsx)("input",{ref:W,type:"text",className:"w-full h-8 border-none outline-none rounded-sm text-gy px-8",placeholder:q("search.search_keyword"),value:be.query,onChange:e=>fe((s=>(0,r.A)((0,r.A)({},s),{},{query:e.target.value}))),onKeyDown:e=>{"Enter"===e.key&&(ke(e.target.value),sessionStorage.setItem("searchQuery",e.target.value))}}),(0,F.jsx)(u.A,{className:"absolute left-0 top-1/2 transform -translate-y-1/2 text-[#aaa] text-3xl"}),be.query&&(0,F.jsx)(p.A,{sx:{stroke:"#757575",strokeWidth:2},className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-[#aaa] text-xl stroke-gray-400",onClick:Ne})]}),(0,F.jsx)("div",{className:"flex py-2",children:Array.isArray(Q)&&Q.map(((e,s)=>(0,F.jsx)("div",{className:"mr-4 mt-2",children:(0,F.jsxs)("label",{children:[(0,F.jsx)("input",{value:e,type:"radio",checked:be.selected===e,onChange:()=>{var s;null===(s=W.current)||void 0===s||s.focus(),fe((s=>(0,r.A)((0,r.A)({},s),{},{selected:e})))}}),e]})},s)))}),(0,F.jsxs)("div",{className:"flex",onClick:()=>ee((0,r.A)((0,r.A)({},$),{},{search:!0})),children:[(0,F.jsx)(x.A,{}),(0,F.jsx)("span",{children:q("search.best_search_posture")})]})]})]}),be.start&&(null===(I=U.list)||void 0===I?void 0:I.length)>0?(0,F.jsxs)(d.u,{completeDelay:1e3,refreshing:Z,onRefresh:()=>{K||Ae(!1,!0,1,0)},renderText:N.S5,className:"overflow-y-visible",style:{marginTop:"30px"},children:[(0,F.jsxs)("div",{className:"bg-white w-full dark:bg-nbk",children:[(0,F.jsxs)("div",{className:"h-10 flex items-center p-2 pt-5",children:[(0,F.jsxs)("p",{children:[q("search.search"),"\xa0'",be.query,"'\xa0\u5171\xa0",U.total||0,"\xa0",q("search.results")]}),(0,F.jsxs)("button",{className:"ml-auto border-[1px] border-solid border-og py-1 px-1 rounded-md flex items-center dark:bg-nbk",onClick:()=>X((0,r.A)((0,r.A)({},V),{},{search:!0})),children:[be.sort.title,(0,F.jsx)(g.A,{})]})]}),(0,F.jsx)(j.A,{t:q,title:"search",link:!0,listName:"searchList",list:U.list,logined:L,setting:E,comicTags:!0,comicMark:!0,comicCheck:!1,editFolder:je,setEditFolder:ve,setDialogOpen:X,dialogOpen:V,showSnackbar:P})]}),(0,F.jsx)("button",{ref:he,onClick:we,className:"w-full flex justify-center pb-40",children:pe?(0,F.jsxs)("div",{className:"flex items-center",children:[(0,F.jsx)(m.A,{color:"inherit",size:12}),(0,F.jsx)("p",{className:"ml-2",children:q("comic.pull_to_load")})]}):(0,F.jsx)("p",{className:"text-center",children:q("comic.no_more")})})]}):(0,F.jsxs)("div",{children:[!K&&be.start&&0===(null===(M=U.list)||void 0===M?void 0:M.length)&&(0,F.jsx)("div",{className:"bg-white text-gy text-center py-5 dark:bg-nbk",children:q("search.no_data_found")}),(0,F.jsxs)("div",{className:"bg-white mt-3 p-2 dark:bg-nbk",children:[(0,F.jsx)("p",{className:"font-black",children:q("search.popular_adult_topics")}),(0,F.jsx)("div",{className:"flex flex-wrap py-2",children:(null===B||void 0===B?void 0:B.length)>0&&B.map(((e,s)=>(0,F.jsx)("p",{className:"border-[1px] border-solid border-gy rounded-md m-1 p-1",onClick:()=>{ke(e),sessionStorage.setItem("searchQuery",e)},children:"#"+e},s)))})]}),ie.length>0&&(0,F.jsxs)("div",{className:"bg-white mt-3 p-2 dark:bg-nbk",children:[(0,F.jsx)("p",{className:"font-black",children:q("search.search_history")}),(0,F.jsx)("div",{className:"mt-3",children:[...ie].reverse().map(((e,s)=>(0,F.jsxs)("div",{className:"flex items-center px-1 border-b-[1px]",children:[(0,F.jsx)("p",{className:"w-11/12 p-2 pt-3",onClick:()=>{ke(e),sessionStorage.setItem("searchQuery",e)},children:e}),(0,F.jsx)(p.A,{className:"ml-auto",sx:{stroke:"#757575",strokeWidth:2},onClick:()=>{ye(e,"remove")}})]},s)))}),(0,F.jsx)("div",{className:"w-full flex justify-end my-4",children:(0,F.jsx)("p",{className:"text-og",onClick:()=>{ye(null,"allRemove")},children:q("search.clear_search_history")})})]}),(0,F.jsxs)("div",{className:"bg-white mt-3 p-2 dark:bg-nbk",children:[(0,F.jsx)("p",{className:"font-black",children:q("search.random_recommendation")}),(0,F.jsx)(j.A,{t:q,title:"search",link:!0,smImgSize:!0,listName:"randomRecommendList",list:H,logined:L,setting:E,comicTags:!0,comicMark:!0,comicCheck:!1,editFolder:je,setEditFolder:ve,setDialogOpen:X,dialogOpen:V,showSnackbar:P}),(0,F.jsx)(a.N_,{to:"/comic/detail?id=".concat(ne),children:(0,F.jsx)("p",{className:"text-og text-center py-5 border-y-[1px] border-solid border-tgy",children:q("search.random_recommendation")})})]}),(0,F.jsx)(k.A,{adKey:"app_search_bottom"})]}),(0,F.jsx)(f.A,{}),$.search&&(0,F.jsx)(v.A,{content:J,msgOpen:$,setMsgOpen:ee}),V.search&&(0,F.jsx)(A.A,{content:G,setDialogOpen:X,dialogOpen:V,setSearchConfig:fe,searchConfig:be,handlerSearch:ke}),(0,F.jsx)(S.A,{snackbars:D,setSnackbars:R})]})}},7947:(e,s,t)=>{t.d(s,{Z:()=>r,x:()=>o});const r={login:{username:"",password:""},signUp:{username:"",password:"",password_confirm:"",email:"",gender:"",adult:!1,PrivacyPolicy:!1},forgot:{email:""}},o={edit:!1,type:"move",folder_id:"",folder_name:"",aid:"",o:"mr",select:"",alert:!1,confirm:!1,message:"",tags_select:""}}}]);
//# sourceMappingURL=884.6f075514.chunk.js.map