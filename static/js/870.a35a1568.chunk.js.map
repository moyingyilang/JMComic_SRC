{"version":3,"file":"static/js/870.a35a1568.chunk.js","mappings":"mKAEA,MA2DA,EA3DoBA,KAClB,MAAMC,GAAQC,EAAAA,EAAAA,QAAuB,OAC9BC,EAAKC,IAAUC,EAAAA,EAAAA,UAAS,IAsD/B,OApDAC,EAAAA,EAAAA,YAAU,KACRC,MAAM,+GACHC,MAAMC,GAAQA,EAAIC,SAClBF,MAAMC,IACLL,EAAOK,EAAIE,KAAkC,4BAAEC,KAAK,GAAGC,UACvDC,QAAQC,IAAIN,EAAIE,KAAkC,4BAAE,GACpD,GACH,KAEHL,EAAAA,EAAAA,YAAU,KACR,IAAKH,IAAQF,EAAMe,QAAS,OAE5Bf,EAAMe,QAAQC,UAAY,GAC1B,MAAMC,EAAYC,SAASC,cAAc,OACzCF,EAAUD,UAAYd,EACtBF,EAAMe,QAAQK,YAAYH,GAmB1B,MAAMI,EAAUJ,EAAUK,qBAAqB,UAC/C,IAAK,IAAIC,KAAUF,EAAS,CAC1B,MAAMG,EAAYN,SAASC,cAAc,UACzCK,EAAUC,KAAOF,EAAOE,MAAQ,kBAE5BF,EAAOG,KACTF,EAAUE,IAAMH,EAAOG,IACvBF,EAAUG,MAAQJ,EAAOI,OAEzBH,EAAUI,YAAcL,EAAOK,YAGjCV,SAASW,KAAKT,YAAYI,EAC5B,IAGC,CAACtB,KAEG4B,EAAAA,EAAAA,KAAA,OAAKC,IAAK/B,GAAa,C","sources":["pages/TestComponent.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nconst AdComponent = () => {\n  const adRef = useRef<HTMLDivElement>(null);\n  const [ads, setAds] = useState(\"\");\n\n  useEffect(() => {\n    fetch(\"http://hollie_18comic_dev.18comic.cc:8880/api/app/ad_content_all?debug_app=plkfdgkjdfe&ipcountry=TW&lang=CN\")\n      .then((res) => res.json())\n      .then((res) => {\n        setAds(res.data[\"app_movie_bottom_center_jm3\"].advs[0].adv_text);\n        console.log(res.data[\"app_movie_bottom_center_jm3\"]);\n      });\n  }, []);\n\n  useEffect(() => {\n    if (!ads || !adRef.current) return;\n\n    adRef.current.innerHTML = \"\"; // 清除舊內容\n    const container = document.createElement(\"div\");\n    container.innerHTML = ads;\n    adRef.current.appendChild(container);\n\n    // 監聽 DOM 變化，尋找可能的廣告標籤\n    //  const observer = new MutationObserver(() => {\n    //    const adElements = container.querySelectorAll(\"ins, div, iframe, span\");\n    //    adElements.forEach((el) => {\n    //      (el as HTMLElement).style.width = \"100%\";\n    //      // (el as HTMLElement).style.height = height;\n    //      (el as HTMLElement).style.display = \"block\"; // 避免 inline 顯示異常\n    //    });\n\n    //    if (adElements.length > 0) {\n    //      observer.disconnect(); // 找到廣告標籤後停止監聽\n    //    }\n    //  });\n\n    //  observer.observe(container, { childList: true, subtree: true });\n\n    // 解析並載入 script\n    const scripts = container.getElementsByTagName(\"script\");\n    for (let script of scripts) {\n      const newScript = document.createElement(\"script\");\n      newScript.type = script.type || \"text/javascript\";\n\n      if (script.src) {\n        newScript.src = script.src;\n        newScript.async = script.async;\n      } else {\n        newScript.textContent = script.textContent;\n      }\n\n      document.body.appendChild(newScript);\n    }\n\n    //  return () => observer.disconnect(); // 清理監聽器\n  }, [ads]);\n\n  return <div ref={adRef}></div>;\n};\n\nexport default AdComponent;\n"],"names":["AdComponent","adRef","useRef","ads","setAds","useState","useEffect","fetch","then","res","json","data","advs","adv_text","console","log","current","innerHTML","container","document","createElement","appendChild","scripts","getElementsByTagName","script","newScript","type","src","async","textContent","body","_jsx","ref"],"sourceRoot":""}